# Production Environment Configuration Template
# Copy this file to .env.production and fill in your production values

# ========================================
# SERVER CONFIGURATION
# ========================================
NODE_ENV=production
PORT=5000
API_VERSION=v1

# ========================================
# DATABASE CONFIGURATION (PostgreSQL Required)
# ========================================
# CRITICAL: Switch from SQLite to PostgreSQL for production
# Include connection pooling for optimal performance

# Option 1: Local PostgreSQL
DATABASE_URL="postgresql://username:password@localhost:5432/electrical_supplier?connection_limit=10&pool_timeout=20"

# Option 2: Managed PostgreSQL (Recommended)
# DigitalOcean: $15-25/month
# DATABASE_URL="postgresql://user:pass@db-postgresql-nyc3-12345.db.ondigitalocean.com:25060/electrical_supplier?sslmode=require&connection_limit=10&pool_timeout=20"

# Render.com: $7+/month
# DATABASE_URL="postgresql://user:pass@dpg-xxxx.render.com/electrical_supplier?connection_limit=10&pool_timeout=20"

# Supabase: Free tier available
# DATABASE_URL="postgresql://postgres:pass@db.xxxx.supabase.co:5432/postgres?connection_limit=10&pool_timeout=20"

# ========================================
# REDIS CONFIGURATION (Required for Production)
# ========================================
# CRITICAL: Use Redis for distributed rate limiting, caching, and sessions

# Option 1: Local Redis
# REDIS_URL=redis://localhost:6379

# Option 2: Upstash Redis (Recommended - Free tier available)
REDIS_URL=redis://:password@your-redis-host.upstash.io:6379

# Option 3: Redis Cloud
# REDIS_URL=redis://:password@redis-12345.cloud.redislabs.com:12345

# Option 4: DigitalOcean Managed Redis ($15/month)
# REDIS_URL=redis://:password@db-redis-nyc3-12345.db.ondigitalocean.com:25061

# ========================================
# JWT & SECURITY (Keep your existing strong secrets)
# ========================================
# IMPORTANT: Use the SAME secrets from your development .env
JWT_SECRET=Aa6m4KjofaNXiIj5e4NnkwN1tp+pfD9v3aQgi45/zOU=
JWT_EXPIRES_IN=15m

JWT_REFRESH_SECRET=UeinMcmXXfK+PDU0/vmdrWfsHwlEKVcy4v6zDYchOps=
JWT_REFRESH_EXPIRES_IN=7d

COOKIE_SECRET=dYmM6Ls9OHFBKqi47QtWp/mckmAe4evsdxY2icLLo9A=

# ========================================
# CORS & FRONTEND CONFIGURATION
# ========================================
# CRITICAL: Set to your actual production domain
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com
FRONTEND_URL=https://yourdomain.com

# ========================================
# CLOUD STORAGE (Required for Production)
# ========================================
# CRITICAL: Use cloud storage instead of local filesystem

# Option A: Cloudflare R2 (RECOMMENDED - Cheapest)
# Pricing: $0.015/GB/month, 10M requests free
STORAGE_PROVIDER=r2
R2_ACCOUNT_ID=your_account_id_here
R2_BUCKET_NAME=electrical-supplier-uploads
R2_ACCESS_KEY_ID=your_r2_access_key
R2_SECRET_ACCESS_KEY=your_r2_secret_key
R2_PUBLIC_URL=https://pub-xxxxxxxxxxxx.r2.dev

# Option B: AWS S3
# STORAGE_PROVIDER=s3
# AWS_S3_BUCKET=electrical-supplier-uploads
# AWS_S3_REGION=us-east-1
# AWS_ACCESS_KEY_ID=AKIAXXXXXXXXXXXXXXXX
# AWS_SECRET_ACCESS_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# AWS_S3_PUBLIC_URL=https://electrical-supplier-uploads.s3.amazonaws.com

# Option C: Azure Blob Storage
# STORAGE_PROVIDER=azure
# AZURE_STORAGE_ACCOUNT_NAME=electricalsupplier
# AZURE_STORAGE_ACCOUNT_KEY=your_key_here
# AZURE_STORAGE_CONTAINER=uploads

# ========================================
# FILE UPLOAD CONFIGURATION
# ========================================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760
MAX_FILES_PER_UPLOAD=10
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp
ALLOWED_DOC_TYPES=application/pdf

# ========================================
# EMAIL CONFIGURATION (SMTP)
# ========================================
# CRITICAL: Configure real SMTP server for production

# Gmail (App Password required)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-16-char-app-password
EMAIL_FROM=noreply@yourdomain.com
ADMIN_EMAIL=admin@yourdomain.com

# SendGrid (Alternative)
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASS=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# EMAIL_FROM=noreply@yourdomain.com

# Mailgun (Alternative)
# SMTP_HOST=smtp.mailgun.org
# SMTP_PORT=587
# SMTP_USER=postmaster@yourdomain.com
# SMTP_PASS=your_mailgun_password
# EMAIL_FROM=noreply@yourdomain.com

# ========================================
# COMPANY INFORMATION
# ========================================
COMPANY_NAME=Electrical Supplier
COMPANY_PHONE=+8801XXXXXXXXX
COMPANY_WHATSAPP=+8801XXXXXXXXX
COMPANY_ADDRESS=Your complete business address here

# ========================================
# RATE LIMITING (Production - Stricter)
# ========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
QUOTE_RATE_LIMIT_WINDOW_MS=3600000
QUOTE_RATE_LIMIT_MAX_REQUESTS=5

# ========================================
# PAGINATION LIMITS (Prevent Overflow)
# ========================================
MAX_PAGE_SIZE=100
DEFAULT_PAGE_SIZE=12
MAX_QUERY_RESULTS=1000

# ========================================
# ANTI-SPAM CONFIGURATION
# ========================================
QUOTE_DEDUP_WINDOW_MS=600000
QUOTE_MAX_PER_EMAIL_PER_DAY=5

# ========================================
# SECURITY
# ========================================
BCRYPT_ROUNDS=12
SESSION_SECURE=true
COOKIE_SECURE=true

# ========================================
# CAPTCHA (Optional but Recommended)
# ========================================
# Cloudflare Turnstile (Recommended - Free tier available)
CAPTCHA_SITE_KEY=your_turnstile_site_key
CAPTCHA_SECRET_KEY=your_turnstile_secret_key

# hCaptcha (Alternative)
# CAPTCHA_SITE_KEY=your_hcaptcha_site_key
# CAPTCHA_SECRET_KEY=your_hcaptcha_secret_key

# ========================================
# MONITORING & LOGGING (Optional but Recommended)
# ========================================
# Sentry Error Tracking (Free tier: 5,000 events/month)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
LOG_LEVEL=info

# ========================================
# WHATSAPP INTEGRATION (Optional)
# ========================================
WHATSAPP_API_URL=
WHATSAPP_API_KEY=

# ========================================
# ADMIN SEED DATA (First Time Setup Only)
# ========================================
# IMPORTANT: Use strong password for initial admin account
SEED_ADMIN_EMAIL=admin@yourdomain.com
SEED_ADMIN_PASSWORD=lUkiupH2aTbhApzVqHdezA$$
SEED_ADMIN_NAME=System Administrator

# ========================================
# DEPLOYMENT NOTES
# ========================================
# 1. NEVER commit this file to Git (.gitignore configured)
# 2. Set all values before first deployment
# 3. Run migrations: npm run prisma:migrate
# 4. Create admin: npm run create-admin
# 5. Test health: curl https://yourdomain.com/api/v1/health
# 6. Monitor logs: pm2 logs
# 7. Set up automated backups (daily recommended)
# 8. Configure uptime monitoring (UptimeRobot, Pingdom)
# 9. Enable HTTPS/SSL (Let's Encrypt free)
# 10. Review security checklist: See SECURITY_CHECKLIST.md
