# PRODUCTION Environment Variables
# Copy this file to .env in production and fill in real values
# NEVER commit the actual .env file to version control!
#
# Generate secrets: Run scripts/generate-secrets.sh or scripts/generate-secrets.ps1
# Full setup guide: See PRODUCTION_SETUP.md

NODE_ENV=production
PORT=5000
API_VERSION=v1

# DATABASE - PostgreSQL is recommended in production.
# IMPORTANT: This repo uses SQLite by default in prisma/schema.prisma for local dev/testing.
# If you deploy with PostgreSQL, generate/migrate using prisma/schema.postgres.prisma:
#   cd backend
#   npm run prisma:generate:pg
#   npm run prisma:deploy:pg   # uses `prisma db push` (recommended for this mixed SQLite-dev/Postgres-prod setup)
#   npm run prisma:seed:pg
# Format: postgresql://username:password@host:5432/dbname?schema=public
DATABASE_URL="postgresql://username:password@host:5432/electrical_supplier?schema=public"

# JWT SECRETS - Generate strong random values (32+ chars)
# NEVER use these example values in production!
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
JWT_SECRET=CHANGE_THIS_TO_STRONG_RANDOM_SECRET
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=CHANGE_THIS_TO_DIFFERENT_RANDOM_SECRET
JWT_REFRESH_EXPIRES_IN=7d
COOKIE_SECRET=CHANGE_THIS_TO_ANOTHER_RANDOM_SECRET

# REVERSE PROXY - If behind Nginx/Cloudflare/ALB, Express trust proxy is enabled
# This ensures rate limiting and logging use the real client IP from X-Forwarded-For
# Already configured in app.ts: app.set('trust proxy', 1)

# CORS - Set to your actual domain(s)
# Single domain: https://yourdomain.com
# Multiple: https://yourdomain.com,https://www.yourdomain.com
CORS_ORIGIN=https://yourdomain.com

# REDIS - HIGHLY RECOMMENDED for production (distributed rate limiting)
# Without Redis, rate limiting is per-process (not effective with multiple servers)
REDIS_URL=redis://username:password@host:6379

# CAPTCHA - Cloudflare Turnstile (recommended) or hCaptcha
# Optional but recommended to prevent spam quote submissions
CAPTCHA_SITE_KEY=your-turnstile-site-key
CAPTCHA_SECRET_KEY=your-turnstile-secret-key

# EMAIL - Configure SMTP for notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
EMAIL_FROM=noreply@yourdomain.com
ADMIN_EMAIL=admin@yourdomain.com

# COMPANY INFO
COMPANY_NAME=Your Company Name
COMPANY_PHONE=+880XXXXXXXXXX
COMPANY_WHATSAPP=+880XXXXXXXXXX
COMPANY_ADDRESS=Your full address

# WHATSAPP API (Optional - for automated notifications)
WHATSAPP_API_URL=
WHATSAPP_API_KEY=

# FILE UPLOAD
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5242880
MAX_FILES_PER_UPLOAD=10
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp
ALLOWED_DOC_TYPES=application/pdf

# RATE LIMITING - Production values
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
QUOTE_RATE_LIMIT_WINDOW_MS=3600000
QUOTE_RATE_LIMIT_MAX_REQUESTS=5
QUOTE_DEDUP_WINDOW_MS=600000
QUOTE_MAX_PER_EMAIL_PER_DAY=5

# SECURITY
BCRYPT_ROUNDS=12

# LOGGING - Set to json for production log aggregation
LOG_FORMAT=json
